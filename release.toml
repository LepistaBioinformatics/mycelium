# cargo-release configuration
# Documentation: https://github.com/crate-ci/cargo-release/blob/master/docs/reference.md

# Allow releasing from specific branches
allow-branch = ["main", "develop"]

# Consolidate commits for all workspace members
consolidate-commits = true

# Ensure working directory is clean before release
pre-release-commit-message = "chore(release): prepare for {{version}}"

# Tag format for releases
tag-name = "v{{version}}"
tag-message = "Release {{version}}"

# Enable signing tags (optional - remove if not using GPG)
# sign-tag = true

# Enable signing commits (optional - remove if not using GPG)
# sign-commit = true

# Push to remote
push = true

# Enable release on git
enable-features = []
enable-all-features = false

# Publish to crates.io (set to false if private registry or not publishing)
publish = false

# Update version references in README if needed
# [[pre-release-replacements]]
# file = "README.md"
# search = "mycelium-.*?-v[0-9]+\\.[0-9]+\\.[0-9]+"
# replace = "mycelium-{{crate_name}}-v{{version}}"

# Package-specific overrides
# You can override settings for specific packages if needed

# Example: Don't publish the test service
# [package.mycelium-api-test-svc]
# publish = false

# Example: Custom configuration for API package
# [package.mycelium-api]
# publish = true
# Custom pre-release hooks can be added here

# Notes:
# 1. All hooks run in order before the release is created
# 2. If any hook fails, the release process stops
# 3. The {{version}} placeholder is replaced with the actual version
# 4. The {{crate_name}} placeholder is replaced with the crate name
# 5. git-cliff integration automatically updates CHANGELOG.md based on conventional commits
# 6. The configuration follows the progression: alpha → beta → rc → release
