# Here the downstream (client) services should be configured
services:
- id: 70f2b105-e154-4e1b-bd1b-fded195123c4
  name: cats
  host: catfact.ninja
  healthCheck:
    path: /health/
    healthResponseCodes:
    - 200

  routes:
  - group: public
    methods:
    - GET
    downstreamUrl: /fact
    protocol: https

- name: test-service-01
  host: localhost:8083
  healthCheck:
    path: /health/
    healthResponseCodes:
    - 200

  secrets:
  - name: test-service-01-query-token
    queryParameter:
      name: "token"
      token: "my-secret-01"
  - name: test-service-01-query-token-02
    env: MY_SECRET_02

  routes:
  - group: public
    methods:
    - GET
    downstreamUrl: /public/*
    protocol: http
    secretName: test-service-01-query-token-02

  - group: protected
    methods:
    - GET
    downstreamUrl: /protected/*
    protocol: http

  - group: !protectedByRoles
      roles: [ new-users ]
    methods:
    - GET
    downstreamUrl: /role-protected/*
    protocol: http

- name: test-service-02
  host: localhost:8084
  healthCheck:
    path: /health/
    healthResponseCodes:
    - 200

  routes:
  - group: public
    methods:
    - GET
    downstreamUrl: /public/*
    protocol: http

  - group: protected
    methods:
    - GET
    downstreamUrl: /protected/*
    protocol: http

  - group: !protectedByPermissionedRoles
      permissionedRoles:
      - [ admin, read ]
    methods:
    - GET
    downstreamUrl: /role-protected/*
    protocol: http

  - group: !protectedByServiceTokenWithRole
      roles: [ new-user ]
    methods:
    - GET
    downstreamUrl: /role-protected/*
    protocol: http

  - group: !protectedByServiceTokenWithPermissionedRoles
      permissionedRoles:
      - [ admin, read ]
    methods:
    - GET
    downstreamUrl: /role-protected/*
    protocol: http
